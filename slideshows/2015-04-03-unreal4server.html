<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>虚幻4引擎C++开发简介</title>

	<meta name="generator" content="Slide Show (S9)">
	<meta name="author" content="Your Name Here">
	<meta name="viewport" content="width=1024, user-scalable=no">

	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="core/deck.core.css">
	<link rel="stylesheet" href="extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="extensions/status/deck.status.css">
	<link rel="stylesheet" href="extensions/hash/deck.hash.css">
	
	<!-- Theme CSS files (menu swaps these out) -->
	<link rel="stylesheet" id="style-theme-link" href="themes/style/web-2.0.css">
	<link rel="stylesheet" id="transition-theme-link" href="themes/transition/horizontal-slide.css">
	
	<!-- Custom CSS just for this page -->
	<!-- GB: changed fixed name to variable -->
	<link rel="stylesheet"  href="2015-04-03-unreal4server.css">
	
	<script src="lib/modernizr.custom.js"></script>
</head>

<body class="deck-container">

<div class="theme-menu">
	<h2>Themes</h2>
	
	<label for="style-themes">Style:</label>
	<select id="style-themes">
		<option selected value="themes/style/web-2.0.css">Web 2.0</option>
		<option value="themes/style/swiss.css">Swiss</option>
		<option value="themes/style/neon.css">Neon</option>
		<option value="">None</option>
	</select>
	
	<label for="transition-themes">Transition:</label>
	<select id="transition-themes">
		<option selected value="themes/transition/horizontal-slide.css">Horizontal Slide</option>
		<option value="themes/transition/vertical-slide.css">Vertical Slide</option>
		<option value="themes/transition/fade.css">Fade</option>
		<option value="">None</option>
	</select>
</div>

<section class="slide" id="title-slide">
	<h1>虚幻4引擎C++开发简介</h1>
</section>

<!-- note: assumes no header (breaking slides w/ SLIDE directive) -->

  <section class="slide" id="2">
    
<!-- _S9SLIDE_ -->
<h2>主要内容</h2>
<hr />
<ol style="vertical-align:middle;">
	<li>开发环境的配置</li>
	<li>UE4网络框架简介
	<ul>
		<li>Actor Replication
		<ul>
			<li>Properties</li>
			<li>Components</li>
			<li>RPC</li>
			<li>位置同步</li>
		</ul></li>
		<li>地图切换</li>
	</ul></li>
	<li>用C++做一个简单的网络Demo</li>
</ol>


  </section>

  <section class="slide" id="3">
    <!-- _S9SLIDE_ -->
<h2><a href="https://docs.unrealengine.com/latest/INT/Programming/Development/VisualStudioSetup/index.html">开发环境配置</a></h2>
<hr />

	<ul style="vertical-align:middle;">
		<li>用VS2013Cummunity只要配置以下几步
  ***Increase the width of the Solution Configurations dropdown menu
		<ul>
			<li>Turn off Show Inactive Blocks. If you do not, many chunks of code may appear grayed out in the text editor. (Tools &gt; Options &gt; Text Editor &gt; C/C++ &gt; View).</li>
			<li>Turn off Edit &amp; Continue features, you do not need them. (Tools &gt; Options &gt; Debugging &gt; Edit and Continue)</li>
			<li>Turn off Format After Paste. It does weird things sometimes. (VAssistX &gt; Visual Assist X Options &gt; Advanced &gt; Corrections)</li>
		</ul></li>
		<li>安装UnrealVS Extension</li>
		<li>安装Debug辅助</li>
	</ul><hr />


  </section>

  <section class="slide" id="4">
    <!-- _S9SLIDE_ -->
<h2 style="vertical-align:middle;"><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/index.html">UE4网络框架简介</a></h2>
<hr />
<ol style="vertical-align:middle;">
	<li>Actor Replication</li>
	<li>地图切换</li>
</ol>


  </section>

  <section class="slide" id="5">
    <!-- _S9SLIDE_ -->
<h2><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/index.html">Actor Replication</a></h2>
<hr />
<ul style="vertical-align:middle;">
	<li>服务器和客户端角色权限的区分(<a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/Roles/index.html">Actor Role and RemoteRole</a>)
	<ul>
		<li>ROLE_None:没有网络角色</li>
		<li>ROLE_Authority:服务端</li>
		<li>ROLE_SimulatedProxy:NPC，怪物，其他玩家角色等</li>
		<li>ROLE_AutonomousProxy:客户端当前玩家控制的角色</li>
	</ul></li>
</ul>


  </section>

  <section class="slide" id="6">
    <!-- _S9SLIDE_ -->
<h2><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/index.html">Actor Replication</a></h2>
<hr />
<ul style="vertical-align:middle;">
	<li>Actor的同步控制
	<ul>
		<li>bReplicates:如果Actor有需要同步的属性，必须设置为true</li>
		<li>bAlwaysRelevant:Actor总是和所有客户端相关，将会同步给所有客户端</li>
		<li>bOnlyRelevantToOwner:只同步给Owner</li>
		<li>bNetLoadOnClient:是否需要从地图文件中加载Actor。如果是放置在地图上希望客户端看到的Actor，这项应该设置为true。(一般情况下大部分Actor都需要)</li>
		<li>bTearOff:客户端获得完全控制权</li>
		<li>bReplicateMovement:自动同步Actor的位置给客户端, Pawns默认为true。</li>
		<li>重载IsNetRelevantFor函数可以自定义网络相关性</li>
	</ul></li>
</ul>


  </section>

  <section class="slide" id="7">
    <!-- _S9SLIDE_ -->
<h2><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/index.html">Actor Replication</a></h2>
<hr />
<ul style="vertical-align:middle;">
	<li><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/Properties/index.html">Properties</a>
	<ul>
		<li>同步机制的使用
		<ul>
			<li>同步不是瞬间发生的，每隔很短的时间会同步一次，所以同步并非立即生效。</li>
			<li>如果属性在同一帧被反复更改多次，只有最终结果会被同步给客户端。如果最终结果相同，则不会同步给客户端。如血量100&#8594;80&#8594;50&#8594;100，和最初相同都是100，不会发生同步。</li>
			<li>大概可以理解为，属性更改是在游戏逻辑中发生的。在游戏逻辑之外有个时间间隔很短的定时器，每隔一段时间检测有发生更改的属性并同步给客户端。</li>
			<li>属性变化时，可以触发回调函数，通过指定ReplicatedUsing=OnRep_xxx来设置回调函数。OnRep_xxx函数必须加上UFUNCTION()以暴露给UE4，并且该函数只会在客户端执行，服务端如果需要执行，必须手动调用</li>
		</ul></li>
		<li>可以基于条件、相关性、距离来控制是否同步(<a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/Relevancy/index.html">Actor Relevancy and Priority</a>)
		<ul>
			<li>基于距离控制是否同步:NetCullDistanceSquared</li>
			<li>属性的同步控制:默认情况下Properties一旦发生改变就会同步给客户端，可以使用DOREPLIFETIME_CONDITION宏增加一些附加条件。
			<ul>
				<li>COND_InitialOnly:只在初始化时同步</li>
				<li>COND_OwnerOnly:只同步给Owner</li>
				<li>COND_SkipOwner:只同步给非Owner</li>
				<li>COND_SimulatedOnly:只同步给非玩家控制的Actor</li>
				<li>COND_AutonomousOnly: 只同步给玩家控制的Actor</li>
				<li>COND_SimulatedOrPhysics:只同步给有非玩家控制或者物理引擎模拟的Actor</li>
				<li>COND_InitialOrOwner:同步给Owner，其他人只在初始化时同步</li>
				<li>COND_Custom:无特定条件，但是可以切换开关状态通过SetCustomIsActiveOverride</li>
			</ul></li>
			<li>上述条件如果还是无法满足，可以自定义同步条件，见宏DOREPLIFETIME_ACTIVE_OVERRIDE。需要注意的是该条件是基于Actor类型的，而不是基于单个客户端的。
			<ul>
				<li>如果自定义条件变化很频繁的话，将会拖慢系统效率</li>
				<li>不能基于每个客户端来指定条件</li>
			</ul></li>
		</ul></li>
		<li>详细的同步流程(<a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/ReplicationFlow/index.html">Detailed Actor Replication Flow</a>)</li>
	</ul></li>
</ul>


  </section>

  <section class="slide" id="8">
    <!-- _S9SLIDE_ -->
<h2><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/index.html">Actor Replication</a></h2>
<hr />
<ul style="vertical-align:middle;">
	<li><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/Components/index.html">Components</a>
	<ul>
		<li>如果想要将组件也同步给客户端，调用SetNetAddressable和SetIsReplicated</li>
	</ul></li>
	<li>位置同步
	<ul>
		<li>角色移动组件(<a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/CharacterMovementComponent/index.html">Character Movement Component</a>)
		<ul>
			<li>新增一个传送技能的示例</li>
		</ul></li>
	</ul></li>
</ul>


  </section>

  <section class="slide" id="9">
    <!-- _S9SLIDE_ -->
<h2><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/index.html">Actor Replication</a></h2>
<hr />

	<ul style="vertical-align:middle;">
		<li><a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Actors/RPCs/index.html">RPCS</a></li>
	</ul>

  </section>

  <section class="slide" id="10">
    <!-- _S9SLIDE_ -->
<h2>地图切换(<a href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Travelling/index.html">Travelling in Multiplayer</a>)</h2>
<ol>
	<li>无缝切换
	<ul>
		<li>ServerTravel：（服务器把所有玩家切到一张新地图去，适合开房间那种单地图的游戏）</li>
		<li>ClientTravel：(将某个客户端切换到地图)</li>
		<li>目前只切换地图，并不会改变玩家坐标，需要进一步研究</li>
	</ul></li>
	<li>非无缝切换
	<ul>
		<li>Browse：相当于硬切换，会将所有客户端踢下线</li>
	</ul></li>
</ol>


  </section>

  <section class="slide" id="11">
    <!-- _S9SLIDE_ -->
<h2>用C++做一个简单的网络Demo</h2>
<hr />
<ol style="vertical-align:middle;">
	<li>使用第三人称模板</li>
	<li>在人物头顶显示名字</li>
	<li>在人物身上播放一个光效</li>
</ol>


  </section>

  <section class="slide" id="12">
    <!-- _S9SLIDE_ -->
<h2>参考资料</h2>
<hr />
<ol style="vertical-align:middle;">
	<li><a href="https://docs.unrealengine.com/latest/INT/">官方英文手册</a></li>
	<li><a href="http://unrealchina.org/minibook/">中文手册</a>
	<ul>
		<li>非官方提供，渣翻译质量</li>
		<li>有能力还是建议直接看英文原版</li>
	</ul></li>
	<li>英文电子书
	<ul>
		<li><a href="http://pan.baidu.com/s/1pnUMi">Learning.C++.by.Creating.Games.with.UE4.2015</a> 提取码:xse6
		<ul>
			<li><a href="http://pan.baidu.com/s/1qWv7daW">随书code</a> 提取码:bx5i</li>
		</ul></li>
	</ul></li>
	<li><a href="https://wiki.unrealengine.com/Videos">官方视频教程</a></li>
	<li><a href="http://www.digitaltutors.com/software/Unreal-Engine-tutorials">DigitalTutors的视频教程</a></li>
	<li>UE4网络特性的相关参考
	<ul>
		<li><a href="https://wiki.unrealengine.com/Network_Replication,_Using_ReplicatedUsing_/_RepNotify_vars">Network Replication, Using ReplicatedUsing / RepNotify vars</a></li>
		<li><a href="https://wiki.unrealengine.com/Networking/Replication">Networking/Replication</a></li>
		<li><a href="https://www.unrealengine.com/blog/network-tips-and-tricks">NETWORK TIPS AND TRICKS</a></li>
		<li><a href="https://www.unrealengine.com/blog/finding-network-based-exploits">FINDING NETWORK-BASED EXPLOITS</a></li>
		<li><a href="https://wiki.unrealengine.com/Replication">Replication</a></li>
		<li><a href="https://forums.unrealengine.com/showthread.php?2956-New-Blueprint-Networking-Tutorial-Videos-Posted&amp;p=20354">New Blueprint Networking Tutorial Videos Posted</a></li>
	</ul></li>
	<li>编码规范(<a href="https://docs.unrealengine.com/latest/INT/Programming/Development/CodingStandard/index.html">Coding Standard</a>)</li>
	<li><a href="https://wiki.unrealengine.com/First_Person_Shooter_C%2B%2B_Tutorial#Starting_a_New_Project">如何从零开始手动创建一个FPS游戏（可以了解一下FPS模板为我们做了哪些事，我们自己如何实现）？</a></li>
</ol>


  </section>

  <section class="slide" id="13">
    <!-- _S9SLIDE_ -->
<h2>总结</h2>
<hr />
<p style="text-align:center;font-size:50px"> Thank You! </p>
  </section>



<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="number" name="slidenum" id="goto-slide">
	<input type="submit" value="Go">
</form>

<a href="." title="Permalink to this slide" class="deck-permalink">#</a>


  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="lib/jquery-1.6.4.min.js"><\/script>')</script>

<!-- Deck Core and extensions -->
<script src="core/deck.core.js"></script>
<script src="extensions/menu/deck.menu.js"></script>
<script src="extensions/goto/deck.goto.js"></script>
<script src="extensions/status/deck.status.js"></script>
<script src="extensions/navigation/deck.navigation.js"></script>
<script src="extensions/hash/deck.hash.js"></script>

<!-- Specific to this page -->
<!-- GB: adding introduction.js inline -->
<script>
$(function() {
	// Deck initialization
	$.deck('.slide');
	
	$('#style-themes').change(function() {
		$('#style-theme-link').attr('href', $(this).val());
	});
	
	$('#transition-themes').change(function() {
		$('#transition-theme-link').attr('href', $(this).val());
	});
});


</script>

</body>
</html>
